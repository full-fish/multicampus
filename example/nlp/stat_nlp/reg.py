text = """주관적 해석

이성민, 차승원, 박희순을 실존인물로 해석하면 그저 말 안되는 기묘한 스토리일 뿐이고.. (면접경쟁자 3명 죽인다고 취업이 된다는 것부터 시작해서 허술한 일처리에도 형사가 못 알아채는 것 등) 사실 주인공 내면의 표상으로서 드러난 인물들이라 생각한다.

1.
이성민은 주인공이 자신과 동일시하는 대상, 그러니까 스스로 인식하고 있는 본인 그 자체다. 태초의 모습 그대로 생리현상을 숨김없이 드러내는(발가벗고 방귀를 뿡뿡 뀌는) 장면에서 알 수 있듯 어떠한 꾸밈도 없다. 찌질하고 꼬질하긴 하지만 택배박스나 돌멩이를 맞아도 허허 웃고 말고, 아내의 바람을 목격해도 혼자 소리도 못내며 바닥을 데굴데굴 구르고 마는 걸 보면 나쁜 사람은 아니다. 스스로를 악인이라 생각하는 사람은 없기 때문일 테다. 염혜란의 불륜을 알아채지 못하도록 애쓰고, 자기 일처럼 눈물짓는 모습에서 주인공이 이성민에게 스스로를 투영하고 있음이 드러난다.

3명의 희생자 중, 방아쇠를 당기기까지 가장 망설였고 또 그 과정이 가장 길고 지저분(?)하기도 했다. 총을 겨눈 상태에서 다섯 겹의 장갑을 벗어야 했고, 끝엔 비닐까지 둘둘 둘러싸여 있었다(마음 깊은 곳에선 사실 쏘기 싫다는 듯). 아내까지 합세한 육탄전을 벌였고, 첫 방은 치명적이지 않은 부위인 어깨에 맞아 한참동안 아파하다 죽어야 했다. 주인공이 자기 손으로 죽이지 못하고, 시체도 직접 처리하지 못한 유일한 인물이다.

두 인물은 뭐라뭐라 대화를 나누긴 하지만, 큰 음악소리(외부요인)에 묻혀 그저 어렴풋한 형태만 알아들을 수 있을 뿐이다. 스스로의 목소리에 귀 기울이고 명료하게 소통하는 건 어쩐지 낯부끄럽기도, 어렵기도 한 일이다. ”라이브카페 차려서 밥벌이 하는 게 뭐가 부끄러워! 아내 말도 잘 들으란 말이야!“, “난 기술자야!” 따위의 말들은 사실 스스로에게 건네고 싶은 말과 변명이었을 거다.

2.
차승원은 겉으로 보기에 멋지게 포장된, 사회적으로 보여주고 싶어하는 자신의 모습이다(추구미). 주인공의 일상에는 첼로, 사교댄스, 테니스, 분재가꾸기, 대형견(무려 2마리) 등 ‘있어보이는, 이상적인‘ 것들이 많이 등장하는데, 주인공이 타인의 눈을 꽤나 신경쓰는, 그러니까 어느 정도의 과시욕을 가진 인물이란 걸 드러낸다. 첫사랑 회상씬 등 구구절절하고 입체적인 서사가 입혀진 이성민 캐릭터에 비해, 차승원 캐릭터에 대한 부연설명은 거의 전무하다. 세련되고 화려하게 ‘보여지기‘ 위한 모습엔 깊이가 담길 수 없기 때문일 테다. 주인공이 차승원에게 건네는 자신의 이야기는 그저 피상적이고, 지나치게 요약되어 핵심이 부재한 말들이다. “이런 일 할 분으로는 안 보여요”라는 것 또한 본인이 원하는 자신의 모습일 것이다.

차승원을 없애는 건 앞전보다 훨씬 쉬웠다. 그저 한 번 해봐서 그렇다기엔 그 온도차가 너무 극명하다. 무방비로 뒤돌아있는 상대에게 큰 망설임 없이 방아쇠를 당기고, 시체도 너무 깔끔하게 트렁크에 싣는다. 이성민을 죽인 뒤 혼비백산해서 언덕을 뛰어내려오고 기름이 바닥나 당황하던 때와 비교하면 너무나도 제 정신인 상태다. 시체의 처리마저 소나무 가지모양 잡듯 아름답고 우아한 형태로 이루어진다. 가장 중요한 알맹이가 부재한 상태에서 껍데기를 버리는 건 쉬운 일이었을 거다.

3.
박희순은 짐승적 본능과 야만성을 드러내는 원초아다. 그는 주인공 농담에 정색을 하다가 갑자기 폭소하기도 하고, 부엌으로 가서 꺼내드는 게 칼인지 술인지조차 가늠할 수 없게 해 긴장감을 조성한다. 이 예측 불가능하고 고삐풀린 캐릭터가 극을 주도할 땐 주인공의 일상을 이루고 있던 것들의 끈이 턱 풀린다(앓던 이를 뽑는 것, 절제하던 술을 입에 대는 것)

“당신 술 마시면 개 되잖아. 전에는 오바이트에 숨 막혀서 질식할 뻔 하기도 했잖아“ 라는 다소 설명조(?)적인 손예진의 대사가 이 캐릭터가 곧 주인공의 또 다른 모습이란 걸 드러내고 있다고 느꼈다.

이렇게 본모습, 잘난모습, 못난모습 등 자신을 이루고 있는 다양한 면모를 몰살시키고 난 뒤에야 주인공은 비로소 기업의 부품으로써 다시 기능할 수 있게 된다.

책임져야 할 것들을 영위하기 위해 자아의 종말을 선택한 가장은 싫은 걸 싫다고 말하지 않는다. 더 이상 자신이 하고 싶은 말을 손바닥에 적으며 떨리는 목소리를 내지도 않는다."""

# ----------------------------------------
"""
1. (정규화식 + python 문자열메소드)을 이용한 방식
정제: 한글, 숫자, 공백만 남기기
공백단위로 분할해서 리스트로 만들기(토큰화)
불용어 제거

2. konlpy사용
형태소 분석 + 품사 태깅
정규화(norm=True): 말줄임, 반복 등 정리
정규화 + 어간 추출(stem=True): 용언 기본형으로

3. 전처리 함수 작성(preprocess(text))
- 정제(영문, 한글, 공백문자, 제외 모든 문자를 공백으로)
- 형태소 분석 + 정규화 + 어간추출
- 품가 기반 (명사, 동사, 형용사)만 남기게 필터링 / 불용어 제거
"""

import re
from konlpy.tag import Okt

okt = Okt()

# 불용어 가져오기
with open("example/stat_nlp/stopwords-ko.txt", encoding="utf-8") as f:
    basic_stopwords = set(w.strip() for w in f if w.strip())

# 1번 실습
print("-----------------1번----------------")

str_reg = re.sub(r"[^가-힝0-9a-zA-Z\s]", "", text)
str_arr = str_reg.split()
print(len(str_arr))


stopworded_arr = [word for word in str_arr if word not in basic_stopwords]
print(len(stopworded_arr))
print(stopworded_arr)

# 2번 실습
print("----------------2번----------------")
pos = okt.pos(text)
pos_norm = okt.pos(text, norm=True)
pos_norm_stem = okt.pos(text, norm=True, stem=True)
print(pos_norm_stem)

# 3번 실습
print("----------------3번----------------")

possible_pos = ["Noun", "ProperNoun", "Number", "Verb", "Adjective"]


def preprocess(text):
    str_reg = re.sub(r"[^가-힝0-9a-zA-Z\s]", "", text)
    pos = okt.pos(str_reg, norm=True, stem=True, join=True)
    pos = [word.split("/") for word in pos]
    filtered_pos = [
        word
        for word, tag in pos
        if word and word not in basic_stopwords and tag in possible_pos
    ]
    return " ".join(filtered_pos)


print(preprocess(text))
print("11      11".split())

# 4번 실습
# 명사끼리, 형용사끼리, 동사끼리 리턴
print("----------------4번----------------")


noun, verb, adjective = [], [], []


def preprocess_pos(text):
    str_reg = re.sub(r"[^가-힝0-9a-zA-Z\s]", "", text)
    pos = okt.pos(str_reg, norm=True, stem=True, join=True)
    pos = [word.split("/") for word in pos]
    for word, tag in pos:
        if not word or word in basic_stopwords:
            continue
        if tag == "Noun":
            noun.append(word)
        elif tag == "Verb":
            verb.append(word)
        elif tag == "Adjective":
            adjective.append(word)
    return [noun, verb, adjective]


filterd_text = preprocess_pos(text)
print(f"명사: {noun}\n\n동사: {verb}\n\n형용사: {adjective}")
